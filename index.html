<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kyle's AI Assistant</title>
<style>
  body {
    background: linear-gradient(135deg, #001628, #005979);
    color: #ffffff;
    font-family: Helvetica, Arial, sans-serif;
    margin: 0;
  }
  header { background-color: #005979; padding: 20px; text-align: center; position: relative; }
  h1 { margin: 0; color: #ffffff; font-size: 2rem; }
  header img { width: 50px; height: auto; position: absolute; top: 15px; left: 15px; }

  .tabs { display: flex; justify-content: center; background-color: #012d40; border-radius: 25px; margin: 20px auto; max-width: 500px; overflow: hidden; }
  .tab { flex: 1; text-align: center; padding: 10px; cursor: pointer; background-color: #012d40; border-radius: 25px; transition: background-color 0.3s, color 0.3s; }
  .tab.active { background-color: #005979; color: #ffffff; }

  .content { display: none; padding: 20px; max-width: 1400px; margin: auto; }
  .content.active { display: block; }

  table { width: 100%; border-collapse: collapse; margin-top: 20px; background-color: #012d40; }
  th, td { padding: 10px; border: 1px solid #005979; cursor: pointer; }
  th { background-color: #005979; }
</style>
</head>
<body>

<header>
  <img src="https://www.sportslogos.net/logos/65/6528/full/seattle_kraken_primary_logo_2021_sportslogosnet-1736.png" alt="Kraken Logo" />
  <h1>Kyle's AI Assistant</h1>
</header>

<div class="tabs">
  <div class="tab active" onclick="showTab('players')">Player Database</div>
  <div class="tab" onclick="showTab('lineups')">Lineups</div>
  <div class="tab" onclick="showTab('salary')">Salary</div>
</div>

<div id="players" class="content active">
  <h2>Player Database</h2>
  <table id="playerTable">
    <thead>
      <tr>
        <th onclick="sortTable(0)">Name</th>
        <th onclick="sortTable(1)">Position</th>
        <th onclick="sortTable(2)">Age</th>
        <th onclick="sortTable(3)">Contract</th>
        <th onclick="sortTable(4)">Potential</th>
        <th onclick="sortTable(5)">Goals</th>
        <th onclick="sortTable(6)">Assists</th>
        <th onclick="sortTable(7)">Points</th>
      </tr>
    </thead>
    <tbody id="playerTableBody"></tbody>
  </table>
</div>

<div id="lineups" class="content">
  <h2>Lineups</h2>
  <p>Lineups are setâ€”no changes needed here!</p>
</div>

<div id="salary" class="content">
  <h2>Salary Analysis</h2>
  <div id="salaryContent"></div>
</div>

<script>
const players = [
  { name: "Matty Beniers", position: "C", age: 22, overall: 85, contract: "$5M x 3", potential: "High Top 6", goals: 23, assists: 40, points: 63 },
  { name: "Jordan Eberle", position: "RW", age: 33, overall: 82, contract: "$5.5M x 2", potential: "Med Top 6", goals: 20, assists: 30, points: 50 },
  { name: "Vince Dunn", position: "LD", age: 27, overall: 86, contract: "$7M x 4", potential: "Med Top 4", goals: 12, assists: 50, points: 62 },
  { name: "Philipp Grubauer", position: "G", age: 32, overall: 83, contract: "$5.9M x 3", potential: "Low Starter", gaa: 2.85, savePct: 0.910 }
];

function showTab(tabId) {
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
  document.querySelector(`[onclick="showTab('${tabId}')"]`).classList.add('active');
  document.getElementById(tabId).classList.add('active');
  if (tabId === 'players') buildPlayerTable();
  if (tabId === 'salary') buildSalaryTables();
}

function buildPlayerTable() {
  const tbody = document.getElementById('playerTableBody');
  tbody.innerHTML = '';
  players.forEach(player => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${player.name}</td>
      <td>${player.position}</td>
      <td>${player.age}</td>
      <td>${player.contract}</td>
      <td>${player.potential || '-'}</td>
      <td>${player.goals || '-'}</td>
      <td>${player.assists || '-'}</td>
      <td>${player.points || '-'}</td>
    `;
    tbody.appendChild(row);
  });
}

function sortTable(columnIndex) {
  const table = document.getElementById("playerTable");
  const rows = Array.from(table.rows).slice(1);
  let sorted = rows.sort((a, b) => {
    const aText = a.cells[columnIndex].textContent.trim();
    const bText = b.cells[columnIndex].textContent.trim();
    const aNum = parseFloat(aText);
    const bNum = parseFloat(bText);

    if (!isNaN(aNum) && !isNaN(bNum)) {
      return aNum - bNum;
    } else {
      return aText.localeCompare(bText);
    }
  });
  rows.forEach(row => table.tBodies[0].appendChild(row));
}

function buildSalaryTables() {
  const salaryContent = document.getElementById('salaryContent');
  salaryContent.innerHTML = '';

  const forwards = players.filter(p => ['LW', 'C', 'RW'].includes(p.position)).sort((a, b) => a.name.localeCompare(b.name));
  const defense = players.filter(p => ['LD', 'RD'].includes(p.position)).sort((a, b) => a.name.localeCompare(b.name));
  const goalies = players.filter(p => p.position === 'G').sort((a, b) => a.name.localeCompare(b.name));

  salaryContent.appendChild(createTable('Forwards', forwards, false));
  salaryContent.appendChild(createTable('Defense', defense, false));
  salaryContent.appendChild(createTable('Goalies', goalies, true));
}

function createTable(title, group, isGoalie) {
  const container = document.createElement('div');
  container.innerHTML = `<h3>${title}</h3>`;
  const table = document.createElement('table');
  const thead = document.createElement('thead');
  const headerRow = document.createElement('tr');

  if (isGoalie) {
    headerRow.innerHTML = `<th>Name</th><th>Age</th><th>Contract</th><th>GAA</th><th>SV%</th><th>Projected Salary</th><th>Status</th>`;
  } else {
    headerRow.innerHTML = `<th>Name</th><th>Age</th><th>Contract</th><th>Goals</th><th>Assists</th><th>Points</th><th>Projected Salary</th><th>Status</th>`;
  }
  thead.appendChild(headerRow);
  table.appendChild(thead);

  const tbody = document.createElement('tbody');
  group.forEach(player => {
    const projected = projectSalary(player, isGoalie);
    const currentSalaryNum = parseFloat(player.contract.split('M')[0].replace('$', ''));
    const status = projected > currentSalaryNum ? 'Underpaid' : projected < currentSalaryNum ? 'Overpaid' : 'Fair';
    const row = document.createElement('tr');

    if (isGoalie) {
      row.innerHTML = `<td>${player.name}</td><td>${player.age}</td><td>${player.contract}</td><td>${player.gaa}</td><td>${player.savePct}</td><td>$${projected.toFixed(1)}M</td><td>${status}</td>`;
    } else {
      row.innerHTML = `<td>${player.name}</td><td>${player.age}</td><td>${player.contract}</td><td>${player.goals}</td><td>${player.assists}</td><td>${player.points}</td><td>$${projected.toFixed(1)}M</td><td>${status}</td>`;
    }
    tbody.appendChild(row);
  });
  table.appendChild(tbody);
  container.appendChild(table);
  return container;
}

function projectSalary(player, isGoalie) {
  let projected;
  if (isGoalie) {
    projected = 3 + (0.02 * (player.savePct * 100)) - (0.1 * player.gaa);
  } else {
    projected = 0.13 * player.points;
  }

  if (player.age < 26) projected *= 1.1;
  if (player.age > 32) projected *= 0.9;
  if (player.potential && /(Elite|Franchise)/.test(player.potential)) projected *= 1.1;

  return projected;
}

// Load initial table
buildPlayerTable();
</script>
</body>
</html>
