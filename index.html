<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kyle's AI Assistant</title>
<style>
  body {
    background: linear-gradient(135deg, #001628, #005979);
    color: #ffffff;
    font-family: Helvetica, Arial, sans-serif;
    margin: 0;
  }
  header { background-color: #005979; padding: 20px; text-align: center; position: relative; }
  h1 { margin: 0; color: #ffffff; font-size: 2rem; }
  header img { width: 50px; height: auto; position: absolute; top: 15px; left: 15px; }

  .tabs { display: flex; justify-content: center; background-color: #012d40; border-radius: 25px; margin: 20px auto; max-width: 500px; overflow: hidden; }
  .tab { flex: 1; text-align: center; padding: 10px; cursor: pointer; background-color: #012d40; border-radius: 25px; transition: background-color 0.3s, color 0.3s; }
  .tab.active { background-color: #005979; color: #ffffff; }

  .content { display: none; padding: 20px; max-width: 1400px; margin: auto; }
  .content.active { display: block; }

  table { width: 100%; border-collapse: collapse; margin-top: 20px; background-color: #012d40; }
  th, td { padding: 10px; border: 1px solid #005979; cursor: pointer; }
  th { background-color: #005979; }

  .lineups-container .forwards-row,
  .lineups-container .forwards-line {
    display: grid;
    grid-template-columns: repeat(3, 1fr) 50px;
    gap: 15px;
    text-align: center;
    font-weight: bold;
    margin-bottom: 15px;
  }

  .lineups-container .defense-row,
  .lineups-container .defense-line {
    display: grid;
    grid-template-columns: repeat(2, 1fr) 50px;
    gap: 15px;
    text-align: center;
    font-weight: bold;
    margin-bottom: 15px;
  }

  .lineups-container .chip {
    background-color: #005979;
    border: 1px solid #012d40;
    min-height: 80px;
    flex-direction: column;
    text-align: center;
    font-size: 0.85rem;
    border-radius: 5px;
    padding: 5px;
  }
  .lineups-container .chip.placeholder { background-color: #e03a3e; }
</style>
</head>
<body>

<header>
  <img src="https://www.sportslogos.net/logos/65/6528/full/seattle_kraken_primary_logo_2021_sportslogosnet-1736.png" alt="Kraken Logo" />
  <h1>Kyle's AI Assistant</h1>
</header>

<div class="tabs">
  <div class="tab active" onclick="showTab('players')">Player Database</div>
  <div class="tab" onclick="showTab('lineups')">Lineups</div>
  <div class="tab" onclick="showTab('salary')">Salary</div>
</div>

<div id="players" class="content active">
  <h2>Player Database</h2>
  <input type="file" id="dataFile" />
  <button onclick="loadData()">Load Data</button>
  <table id="playerTable">
    <thead>
      <tr>
        <th onclick="sortTable(0)">Name</th>
        <th onclick="sortTable(1)">Position</th>
        <th onclick="sortTable(2)">Age</th>
        <th onclick="sortTable(3)">Contract</th>
        <th onclick="sortTable(4)">Potential</th>
        <th onclick="sortTable(5)">Goals</th>
        <th onclick="sortTable(6)">Assists</th>
        <th onclick="sortTable(7)">Points</th>
      </tr>
    </thead>
    <tbody id="playerTableBody"></tbody>
  </table>
</div>

<div id="lineups" class="content">
  <h2>Lineups</h2>
  <div class="lineups-container">
    <h3>Forwards</h3>
    <div class="forwards-row"><div>LW</div><div>C</div><div>RW</div><div>Chem</div></div>
    <div id="forwards"></div>

    <h3>Defense</h3>
    <div class="defense-row"><div>LD</div><div>RD</div><div>Chem</div></div>
    <div id="defense"></div>

    <h3>Goalies</h3>
    <div id="goalies" class="line"></div>
  </div>
</div>

<div id="salary" class="content">
  <h2>Salary Analysis</h2>
  <div id="salaryContent"></div>
</div>

<script>
let players = [];
function showTab(tabId) {
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
  document.querySelector(`[onclick="showTab('${tabId}')"]`).classList.add('active');
  document.getElementById(tabId).classList.add('active');
  if (tabId === 'players') buildPlayerTable();
  if (tabId === 'lineups') buildLineups();
  if (tabId === 'salary') buildSalaryTables();
}
function loadData() {
  const fileInput = document.getElementById('dataFile');
  const file = fileInput.files[0];
  if (!file) { alert('Please select a file!'); return; }
  const reader = new FileReader();
  reader.onload = e => {
    try {
      players = JSON.parse(e.target.result);
      buildPlayerTable();
      buildLineups();
    } catch (err) {
      alert('Error reading file: ' + err.message);
    }
  };
  reader.readAsText(file);
}
function buildPlayerTable() {
  const tbody = document.getElementById('playerTableBody');
  tbody.innerHTML = '';
  players.forEach(player => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${player.name}</td>
      <td>${player.position}</td>
      <td>${player.age}</td>
      <td>${player.contract}</td>
      <td>${player.potential || '-'}</td>
      <td>${player.goals || '-'}</td>
      <td>${player.assists || '-'}</td>
      <td>${player.points || '-'}</td>
    `;
    tbody.appendChild(row);
  });
}
function sortTable(columnIndex) {
  const table = document.getElementById("playerTable");
  const rows = Array.from(table.rows).slice(1);
  let sorted = rows.sort((a, b) => {
    const aText = a.cells[columnIndex].textContent.trim();
    const bText = b.cells[columnIndex].textContent.trim();
    const aNum = parseFloat(aText);
    const bNum = parseFloat(bText);
    if (!isNaN(aNum) && !isNaN(bNum)) return aNum - bNum;
    return aText.localeCompare(bText);
  });
  rows.forEach(row => table.tBodies[0].appendChild(row));
}
function buildLineups() {
  const forwards = document.getElementById('forwards');
  const defense = document.getElementById('defense');
  const goalies = document.getElementById('goalies');
  forwards.innerHTML = '';
  defense.innerHTML = '';
  goalies.innerHTML = '';
  const forwardsList = players.filter(p => ['LW', 'C', 'RW'].includes(p.position));
  const defenseList = players.filter(p => ['LD', 'RD'].includes(p.position));
  const goaliesList = players.filter(p => p.position === 'G');
  for (let i = 0; i < 4; i++) {
    const line = document.createElement('div');
    line.classList.add('line', 'forwards-line');
    for (let j = 0; j < 3; j++) {
      const player = forwardsList[i*3 + j] || null;
      const chip = createChip(player);
      line.appendChild(chip);
    }
    const chemBox = document.createElement('div');
    chemBox.textContent = '0';
    line.appendChild(chemBox);
    forwards.appendChild(line);
  }
  for (let i = 0; i < 3; i++) {
    const line = document.createElement('div');
    line.classList.add('line', 'defense-line');
    for (let j = 0; j < 2; j++) {
      const player = defenseList[i*2 + j] || null;
      const chip = createChip(player);
      line.appendChild(chip);
    }
    const chemBox = document.createElement('div');
    chemBox.textContent = '0';
    line.appendChild(chemBox);
    defense.appendChild(line);
  }
  goaliesList.forEach(player => {
    const chip = createChip(player);
    goalies.appendChild(chip);
  });
}
function createChip(player) {
  const chip = document.createElement('div');
  chip.classList.add('chip');
  chip.innerHTML = player ? `
    <strong>${player.name}</strong><br>
    ${player.position}, Age: ${player.age}<br>
    Potential: ${player.potential}<br>
    Contract: ${player.contract}
  ` : 'Player Needed';
  return chip;
}
function buildSalaryTables() {
  const salaryContent = document.getElementById('salaryContent');
  salaryContent.innerHTML = '';
  const forwards = players.filter(p => ['LW', 'C', 'RW'].includes(p.position)).sort((a, b) => a.name.localeCompare(b.name));
  const defense = players.filter(p => ['LD', 'RD'].includes(p.position)).sort((a, b) => a.name.localeCompare(b.name));
  const goalies = players.filter(p => p.position === 'G').sort((a, b) => a.name.localeCompare(b.name));
  salaryContent.appendChild(createTable('Forwards', forwards, false));
  salaryContent.appendChild(createTable('Defense', defense, false));
  salaryContent.appendChild(createTable('Goalies', goalies, true));
}
function createTable(title, group, isGoalie) {
  const container = document.createElement('div');
  container.innerHTML = `<h3>${title}</h3>`;
  const table = document.createElement('table');
  const thead = document.createElement('thead');
  const headerRow = document.createElement('tr');
  if (isGoalie) {
    headerRow.innerHTML = `<th>Name</th><th>Age</th><th>Contract</th><th>GAA</th><th>SV%</th><th>Projected Salary</th><th>Status</th>`;
  } else {
    headerRow.innerHTML = `<th>Name</th><th>Age</th><th>Contract</th><th>Goals</th><th>Assists</th><th>Points</th><th>Projected Salary</th><th>Status</th>`;
  }
  thead.appendChild(headerRow);
  table.appendChild(thead);
  const tbody = document.createElement('tbody');
  group.forEach(player => {
    const projected = projectSalary(player, isGoalie);
    const currentSalaryNum = parseFloat(player.contract.split('M')[0].replace('$', ''));
    const status = projected > currentSalaryNum ? 'Underpaid' : projected < currentSalaryNum ? 'Overpaid' : 'Fair';
    const row = document.createElement('tr');
    if (isGoalie) {
      row.innerHTML = `<td>${player.name}</td><td>${player.age}</td><td>${player.contract}</td><td>${player.gaa}</td><td>${player.savePct}</td><td>$${projected.toFixed(1)}M</td><td>${status}</td>`;
    } else {
      row.innerHTML = `<td>${player.name}</td><td>${player.age}</td><td>${player.contract}</td><td>${player.goals}</td><td>${player.assists}</td><td>${player.points}</td><td>$${projected.toFixed(1)}M</td><td>${status}</td>`;
    }
    tbody.appendChild(row);
  });
  table.appendChild(tbody);
  container.appendChild(table);
  return container;
}
function projectSalary(player, isGoalie) {
  let projected;
  if (isGoalie) {
    projected = 3 + (0.02 * (player.savePct * 100)) - (0.1 * player.gaa);
  } else {
    projected = 0.13 * player.points;
  }
  if (player.age < 26) projected *= 1.1;
  if (player.age > 32) projected *= 0.9;
  if (player.potential && /(Elite|Franchise)/.test(player.potential)) projected *= 1.1;
  return projected;
}
</script>
</body>
</html>
